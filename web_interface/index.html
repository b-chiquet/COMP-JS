<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="A front-end template that helps you build fast, modern mobile web apps.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <title>Compilation interactive</title>





    <link rel="shortcut icon" href="images/favicon.png">


    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.yellow-deep_purple.min.css">
    <link rel="stylesheet" href="styles.css">
    <style>
        #view-source {
            position: fixed;
            display: block;
            right: 0;
            bottom: 0;
            margin-right: 40px;
            margin-bottom: 40px;
            z-index: 900;
        }
		
		.mdl-cell--padding {
			padding: 20px;
		}
		
		.mdl-typography--title--margin {
			margin-left: 10px;
		}
		
		.mdl-cell--border-bottom {
			border-bottom: lightgray solid 2px;
		}
		
		
		.code-line--content {
			display: inline-block;
			font-family: 'Consolas', sans-serif;
			color: gray;
			margin-left: 10px;
		}
		
		.code-line--content-system {
			display: inline-block;
			font-family: 'Consolas', sans-serif;
			color: gray;
			opacity: 0.8;
			margin-left: 10px;
		}
		
		.tab {
			display: inline-block;
			margin-left: 20px;
		}
		
		.code-line--number {
			font-family: 'Consolas', sans-serif;
			color: gray;
		}
		
		.code-line--number::after {
			content: '> ';
		}
    </style>
</head>

<body>
    <div class="demo-layout mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header">
        <header class="demo-header mdl-layout__header mdl-color--grey-100 mdl-color-text--grey-600">
            <div class="mdl-layout__header-row">
                <span class="mdl-layout-title">Compilateur WHILE vers JavaScript</span>
                <div class="mdl-layout-spacer"></div>
            </div>
        </header>
        <div class="demo-drawer mdl-layout__drawer mdl-color--brown-900 mdl-color-text--blue-grey-50">
            <header class="demo-drawer-header">

            </header>
            <nav class="demo-navigation mdl-navigation mdl-color--brown-800">
                <a class="mdl-navigation__link" href=""><i class="mdl-color-text--white-400 material-icons" role="presentation">home</i>Lien du cours</a>
                <a class="mdl-navigation__link" href=""><i class="mdl-color-text--white-400 material-icons" role="presentation">delete</i>Réinitialiser</a>
                <a class="mdl-navigation__link" href=""><i class="mdl-color-text--white-400 material-icons" role="presentation">bug_report</i>Signaler un bug</a>
                <a class="mdl-navigation__link" href=""><i class="mdl-color-text--white-400 material-icons" role="presentation">code</i>Voir les sources</a>
                <div class="mdl-layout-spacer"></div>
                <a class="mdl-navigation__link" href=""><i class="mdl-color-text--white-400 material-icons" role="presentation">help_outline</i><span class="visuallyhidden">Help</span></a>
            </nav>
        </div>
        <main class="mdl-layout__content mdl-color--grey-100">
            <div class="mdl-grid">

                <div class="mdl-cell mdl-cell--6-col-desktop mdl-cell--8-col-tablet mdl-grid">
				
					<div class="mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--12-col mdl-cell--top mdl-cell--padding mdl-grid">

						<div class="mdl-cell mdl-cell--3-col mdl-color--orange mdl-color-text--white mdl-typography--text-center">
							<div class="mdl-typography--display-3">1</div>
						</div>
						<div class="mdl-cell mdl-cell--9-col mdl-cell--padding mdl-cell--border-bottom">
							<div class="mdl-typography--title mdl-typography--title--margin">Input</div>
							<p>Paste or write WHILE code below</p>
						</div>
						
						<!-- end header -->
						
						<div class="mdl-cell mdl-color--grey-200 mdl-cell--12-col mdl-cell--border-bottom mdl-cell--padding">
							<div class="code-line">
								<b class="code-line--number">1</b>
								<span class="code-line--content">function estPair:</span>
							</div>
							<div class="code-line">
								<b class="code-line--number">2</b>
								<span class="code-line--content">
									<span class="tab"></span>
									read X;
								</span>
							</div>
							<div class="code-line">
								<b class="code-line--number">3</b>
								<span class="code-line--content">
									<span class="tab"></span>
									%
								</span>
							</div>
							<div class="code-line">
								<b class="code-line--number">4</b>
								<span class="code-line--content">
									<span class="tab"></span>
									RES = ((X % 2) == 0);
								</span>
							</div>
							<div class="code-line">
								<b class="code-line--number">5</b>
								<span class="code-line--content">
									<span class="tab"></span>
									%
								</span>
							</div>
							<div class="code-line">
								<b class="code-line--number">6</b>
								<span class="code-line--content">
									<span class="tab"></span>
									write RES;
								</span>
							</div>
							<br/>
						</div>
						
						<!-- start footer -->
						
						<div class="mdl-cell mdl-cell--12-col mdl-typography--text-right">
							<button id="user-action--import" class="mdl-button mdl-js-button">Importer</button>
							<div class="mdl-tooltip mdl-tooltip--large" for="user-action--import">Importer le contenu d'un fichier WHILE</div>
							<button id="user-action--paste" class="mdl-button mdl-js-button">Coller</button>			
							<div class="mdl-tooltip mdl-tooltip--large" for="user-action--paste">Coller le code issu du presse-papier</div>
							<button id="user-action--compile" class="mdl-button mdl-js-button mdl-color-text--orange">Compiler</button>
							<div class="mdl-tooltip mdl-tooltip--large" for="user-action--compile">Compiler le code en JavaScript fonctionnel</div>
						</div>
						
					</div>
                </div>
				
				<div class="mdl-cell mdl-cell--6-col-desktop mdl-cell--8-col-tablet mdl-grid">
				
					<div class="mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--top mdl-cell--12-col  mdl-cell--padding mdl-grid">

						<div class="mdl-cell mdl-cell--3-col mdl-color-text--white mdl-color--blue mdl-typography--text-center">
							<div class="mdl-typography--display-3">2</div>
						</div>
						<div class="mdl-cell mdl-cell--9-col mdl-color-text--black mdl-cell--padding mdl-cell--border-bottom">
							<div class="mdl-typography--title mdl-typography--title--margin">Output</div>
							<p>Obtain the matching JAVASCRIPT code here</p>
						</div>
						
						<!-- end header -->
						
						<div class="mdl-cell mdl-cell--12-col mdl-color--grey-200 mdl-cell--border-bottom mdl-typography--text-left mdl-cell--padding">
							<div class="code-line">
								<b class="code-line--number">1</b>
								<span class="code-line--content">
								var whileFunctions = {
								</span>
							</div>
							<div class="code-line">
								<b class="code-line--number">2</b>
								<span class="tab"></span>
								<span class="code-line--content">estPair: {</span>
							</div>
							
							<div class="code-line">
								<b class="code-line--number">3</b>
								<span class="code-line--content">
									<span class="tab"></span><span class="tab"></span>
									code: function(args){
								</span>
							</div>
							<div class="code-line">
								<b class="code-line--number">4</b>
								<span class="code-line--content">
									<span class="tab"></span><span class="tab"></span><span class="tab"></span><span class="tab"></span>
									const res = ((args[0] % 2) == 0);
								</span>
							</div>
							<div class="code-line">
								<b class="code-line--number">5</b>
								<span class="code-line--content">
									<span class="tab"></span><span class="tab"></span><span class="tab"></span><span class="tab"></span>
									return res;
								</span>
							</div>
							<div class="code-line">
								<b class="code-line--number">6</b>
								<span class="code-line--content">
									<span class="tab"></span><span class="tab"></span>
									},
								</span>
							</div>
							<div class="code-line">
								<b class="code-line--number">7</b>
								<span class="code-line--content">
									<span class="tab"></span><span class="tab"></span>
									metadata: {
								</span>
							</div>
							<div class="code-line">
								<b class="code-line--number">8</b>
								<span class="code-line--content">
									<span class="tab"></span><span class="tab"></span><span class="tab"></span>
									argsIn: 1,
								</span>
							</div>
							<div class="code-line">
								<b class="code-line--number">9</b>
								<span class="code-line--content">
									<span class="tab"></span><span class="tab"></span><span class="tab"></span>
									argsOut: 1
								</span>
							</div>
							<div class="code-line">
								<b class="code-line--number">10</b>
								<span class="code-line--content"><span class="tab"></span><span class="tab"></span>}</span>
							</div>
							<div class="code-line">
								<b class="code-line--number">11</b>
								<span class="code-line--content"><span class="tab"></span>}</span>
							</div>
							<div class="code-line">
								<b class="code-line--number">12</b>
								<span class="code-line--content">};</span>
							</div>
							<br/>
						</div>
						
						<!-- start footer -->
						
						<div class="mdl-cell mdl-cell--12-col mdl-typography--text-right">
							<button id="user-action--copy" class="mdl-button mdl-js-button">Copier</button>
							<div class="mdl-tooltip mdl-tooltip--large" for="user-action--copy">Copier le code dans le presse-papier</div>
							<button id="user-action--export" class="mdl-button mdl-js-button mdl-color-text--blue">Sauvegarder</button>
							<div class="mdl-tooltip mdl-tooltip--large" for="user-action--export">Exporter en tant que fichier local</div>
						</div>
					</div>
                </div>
				
				<div class="mdl-cell mdl-cell--8-col-desktop mdl-cell--2-offset mdl-cell--6-col-tablet mdl-cell--1-offset-tablet mdl-grid">
				
					<div class="mdl-color--white  mdl-shadow--2dp mdl-cell mdl-cell--12-col mdl-cell--padding mdl-grid">

						<div class="mdl-cell mdl-cell--3-col mdl-color-text--white mdl-color--red mdl-typography--text-center">
							<div class="mdl-typography--display-3">3</div>
						</div>
						<div class="mdl-cell mdl-cell--9-col mdl-color-text--black mdl-cell--padding mdl-cell--border-bottom">
							<div class="mdl-typography--title mdl-typography--title--margin">Console</div>
							<p>Interact there with the JavaScript functions generated</p>
							
							
						</div>
						
						<!-- end header -->
						<!-- start functions -->
						
						<div class="mdl-cell mdl-cell--12-col mdl-cell--padding mdl-cell--border-bottom">
							<button id="user-action--export" class="mdl-button mdl-js-button mdl-color-text--red" onclick="testDynamicFnc('estPair')">estPair</button><span class="tab"></span><i>Tester la fonction 'estPair' (1 argument en entrée, 1 résultat en sortie)</i>
						
						</div>
						
						<!-- end functions -->
						<!-- start console -->
						
						<div class="mdl-cell mdl-cell--12-col mdl-color--grey-200 mdl-cell--border-bottom mdl-typography--text-left mdl-cell--padding">
							
							<div class="code-line">
								<b class="code-line--number">11:27:40:272</b>
								<span class="code-line--content">
									results : [false]
								</span>
							</div>
							
							<div class="code-line">
								<b class="code-line--number">11:27:39:863</b>
								<span class="code-line--content code-line--content-system">
									Function estPair called with params : [13]
								</span>
							</div>
							
							<br/>
						</div>
						
						
					</div>
                </div>
            </div>
        </main>
    </div>

    <script src="https://code.getmdl.io/1.3.0/material.min.js"></script>
	<script type="text/javascript">
	
	// 1°) Test de la fonction eval (appel de la fonction hello dynamiquement créée)
	eval("var hello = function(){console.log('hello !')};");
	hello();
	
	// 2°) Test de la fonction eval avec le code JavaScript généré
	var result = `
		var whileFunctions = {
			estPair: {
				code: function(args){
					const res = ((args[0]%2) == 0);
					return res;
				},
				metadata: {
					argsIn: 1,
					argsOut: 1
				}
			}
		};
	`;
	
	console.log(result);
	
	eval(result);
	
	console.log("8 est pair ? : " + whileFunctions.estPair.code([8]));
	console.log("7 est pair ? : " + whileFunctions.estPair.code([7]));
	
	
	// 3°) Automatisation (utilisation des fonctions dynamiquement declarees "a la volee")
	
	var testDynamicFnc = function(fncName){
		
		fncName = fncName || "estPair";
	
		// Extraction du nombre de parametres en entree
		var params = [];
		for(var i = 0; i < whileFunctions[fncName]['metadata']['argsIn']; i ++){
			params.push(prompt('Argument ' + i + ' ?'));
		}
		
		// Obtention du resultat
		var results = whileFunctions[fncName].code(params);
		alert('Function returned : ' + results);
		
	};
	
	
	</script>
</body>
</html>
